<div
    #selection
    [attr.tabindex]="disabled ? null : 0"
    [ngClass]="{'open': isOpen, 'focus': hasFocus, 'below': isBelow, 'disabled': disabled}"
    (click)="onSelectContainerClick($event)"
    (focus)="onSelectContainerFocus()"
    (keydown)="onSelectContainerKeydown($event)"
    (window:click)="onWindowClick()"
    (window:resize)="onWindowResize()">

    <div class="single"
        *ngIf="!multiple">
        <div class="value"
            *ngIf="optionList.hasSelected()">
            <ng-template *ngIf="selectionTemplate" [ngTemplateOutlet]="{option: optionList.selection[0], onDeselectOptionClick: onDeselectOptionClick}" [ngTemplateOutlet]="selectionTemplate"></ng-template>
            <span *ngIf="!selectionTemplate">{{optionList.selection[0].label}}</span>
        </div>
        <div class="placeholder"
            *ngIf="!optionList.hasSelected()">
            <ng-template *ngIf="placeholderTemplate" [ngTemplateOutlet]="placeholderTemplate"></ng-template>
            <span *ngIf="!placeholderTemplate">
                {{placeholderView}}
            </span>
        </div>
        <div class="clear"
            *ngIf="allowClear && hasSelected"
            (click)="onClearSelectionClick($event)">
            &#x2715;
        </div>
        <div class="toggle"
            *ngIf="isOpen">
            &#x25B2;
        </div>
        <div class="toggle"
            *ngIf="!isOpen">
            &#x25BC;
        </div>
    </div>

    <div class="multiple"
        *ngIf="multiple">
        <div class="placeholder"
            *ngIf="!optionList.hasSelected() && !filterEnabled">
            <ng-template *ngIf="placeholderTemplate" [ngTemplateOutlet]="placeholderTemplate"></ng-template>
            <span *ngIf="!placeholderTemplate">
                {{placeholderView}}
            </span>
        </div>

        <div class="option"
            *ngFor="let option of optionList.selection">
            <ng-template *ngIf="selectionTemplate" [ngTemplateOutlet]="{option: option, onDeselectOptionClick: onDeselectOptionClick}" [ngTemplateOutlet]="selectionTemplate"></ng-template>
            <span *ngIf="!selectionTemplate">
                <span class="deselect-option"
                    (click)=onDeselectOptionClick(option)>
                    &#x2715;
                </span>
                {{option.label}}
            </span>
        </div>
        <input
            *ngIf="filterEnabled"
            #filterInput
            tabindex="-1"
            [placeholder]="placeholderView"
            [ngStyle]="{'width.px': filterInputWidth}"
            (input)="onMultipleFilterInput($event)"
            (keydown)="onMultipleFilterKeydown($event)"/>

        <div class="toggle"
            *ngIf="isOpen && showToggle">
            &#x25B2;
        </div>
        <div class="toggle"
            *ngIf="!isOpen && showToggle">
            &#x25BC;
        </div>
    </div>

</div>
<select-dropdown
    *ngIf="isOpen"
    #dropdown
    [multiple]="multiple"
    [optionList]="optionList"
    [notFoundMsg]="notFoundMsg"
    [highlightColor]="highlightColor"
    [highlightTextColor]="highlightTextColor"
    [filterEnabled]="filterEnabled"
    [forceFilterEnabled]="forceFilterEnabled"
    [width]="width"
    [top]="top"
    [left]="left"
    [groupTemplate]="groupTemplate"
    [selectOptionTemplate]="selectOptionTemplate"
    [notFoundTemplate]="notFoundTemplate"
    [alwaysOnTemplate]="alwaysOnTemplate"
    (close)="onDropdownClose($event)"
    (optionClicked)="onDropdownOptionClicked($event)"
    (singleFilterClick)="onSingleFilterClick()"
    (singleFilterInput)="onSingleFilterInput($event)"
    (singleFilterKeydown)="onSingleFilterKeydown($event)">
</select-dropdown>
